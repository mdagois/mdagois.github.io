<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Coding Adventure</title>
    <link rel="stylesheet" href="../bootstrap.min.css">
  </head>
  <body>
    <nav class="navbar navbar-expand-lg bg-primary" data-bs-theme="dark">
      <div class="container-fluid">
      <div class="navbar-brand">Coding Adventures</div>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarColor01">
        <ul class="navbar-nav me-auto">
        <li class="nav-item">
          <a class="nav-link" href="../index.html">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../portfolio.html">Portfolio</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../about.html">About</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../contact.html">Contact</a>
        </li>
        </ul>
      </div>
      </div>
    </nav>

    <div class="container">
      <br/>
      <p>
        <img src="../images/gameboy.png" alt="gameboy" class="rounded mx-auto d-block">
      </p>

      <h4>Parallax Scrolling on the Game Boy</h4>
        <p>
          This article is an in-depth guide to implementing parallax scrolling on the Game Boy.
          It presents two techniques that you can use to add parallax scrolling to your Game Boy games.
        </p>
        <p>
          We'll start by reviewing what parallax scrolling is, and what the challenges are to implement it on the Game Boy.
        </p>
        <p>
          Then, we'll go over the two parallax techniques: the <i>hblank</i> method and the <i>tile</i> method.
          We'll show how to implement those techniques and explain their benefits and drawbacks.
          We'll use assembly code samples to show all the implementation details.
          However, the concepts presented in this article should also be relevant to games programmed in C,
          and the techniques might be applicable to other consoles as well, such as the NES or Master System.
        </p>
        <p>
          By the end of the article, you'll have a strong grasp of what it takes to implement parallax scrolling on the Game Boy.
          You'll also be able to choose the best parallax techniques for your game.
        </p>

        <h5>Target audience</h5>
          <p>
            Anyone interested in game development can grasp the concepts presented in this article.
            However, you should be familiar with programming the Game Boy in assembly in order to follow along with the code samples.
            To get a strong introduction to Game Boy programming in assembly, I recommend you to check my book,
            <a href="https://mdagois.gumroad.com/l/CODQn" target="_blank">Game Boy Coding Adventure</a>.
            It is a complete coverage of all the aspects the Game Boy, using a beginner-friendly approach for those new to assembly.
          </p>

        <h5>What is parallax scrolling</h5>
          <p>
            Parallax scrolling is a graphics technique used to create the illusion of depth with 2D graphics.
            The effect of parallax scrolling is shown in Figure 1.
            <figure>
              <img src="../images/parallax/parallax_scrolling.gif" alt="Parallax scrolling">
              <figcaption>Figure 1: Parallax scrolling</figcaption>
            </figure>
            Graphics elements are placed on distinct layers that moves at different paces.
            The further away a layer is meant to be from the observer, the slower it moves.
          </p>
          <p>
            What makes parallax scrolling challenging on the Game Boy is that the console only supports one single background layer.
            So, we have to leverage the hardware capabilities to mimic the effect of having several background layers.
          </p>

      <h5>The hblank method</h5>
        <p>
          The first technique we'll study is the hblank method.
          In my <a href="https://mdagois.gumroad.com/l/CODQn" target="_blank">book</a>, I go over two hblank parallax version.
          One <i>naive</i> implementation, and one <i>optimized</i> implementation.
          In this article, we'll use a modified version of the optimized implementation.
          It has the benefit of avoiding the <i>rSTAT bug</i>, which is a nasty hardware issue that occurs on the original Game Boy.
          Basically, that bug causes spurious LCD interrupts to trigger when the <tt>rSTAT</tt> register is written to.
          In this article, we'll only write to the <tt>rSTAT</tt> register from inside the interrupt function, so the bug won't occur, and thus, we don't need to write code specifically to counter it.

          Figure 2 is a video of the hblank sample.
          It consists of an astronauts walking on a planet.
        </p>
        <figure>
          <video autoplay loop muted preload="auto">
            <source src="../video/parallax/hblank.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
          <figcaption>Figure 2: Parallax scrolling using the hblank method</figcaption>
        </figure>
        <p>
          The planets and stars appear to be at a great distance, while the rocks appear farther away than the ground.
          To achieve this parallax effect, the idea is to split the screen horizontally into three different layers.
          The top layer contains the planets and stars.
          The middle layer contains the rocks.
          The bottom layer contains the ground on which the astronauts walks.
          The layers are shown in Figure 3, with red lines separating them.
        </p>
        <figure>
          <img src="../images/parallax/layers.png" alt="Parallax layers">
          <figcaption>Figure 3: Parallax layers</figcaption>
        </figure>
        <p>
          The sky layer extends from lines 0 to 87.
          The rock spans lines 88 to 111.
          The ground covers the remaining lines, from 112 to 143.
          Each layer is scrolled at a different pace when the astronaut walks around in order to create the parallax effect.
        </p>
        <p>
          Only one scrolling value -> need to change it for each layer.
        </p>

      <h5>The tile method</h5>
        <figure>
          <video autoplay loop muted preload="auto">
            <source src="../video/parallax/tile.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
          <figcaption>Figure XXX: Parallax scrolling using the tile method</figcaption>
        <p>
        </p>

      <h5>Conclusion</h5>
        <!--If you want to know everything there is to know about Game Boy programming, please check out my book on the subject, <a href="https://mdagois.gumroad.com/l/CODQn" target="_blank">Game Boy Coding Adventure</a>.-->

      <!--
        Content
          Introduction
            Works in Game Boy Color
            Note on ghosting
                Rule of thumb to design tiles that scroll well (refer to games)
          Using interrupts
            hblank
            line compare
            Naive implementation
            Optimized implementation
            Using sprites for overlap
            Using one single halt or several halts
            rSCX latched at the start of the line
            Split from 2 to n layers
            Benefit: supported in hardware (light weight)
            Drawback: layers cannot overlap unless using sprites, but hit sprite limits + only 2 colors (bg sees through)
          Using tiles
            Explanation
            Benefit: layers can overlap, can work vertically, works for top down views (zelda-like or shmups)
            Drawback: uses more rom space, more work in the vblank, must respect tile boundaries
            CGB: can use DMA
          Conclusion
            Mix both techniques
            Faster data transfers on the DMG using pop slide
            No need for interrupt in an intro screen
            Read the book
            Rift effect for shmups
            More techniques: window, sprites
          Art attribution
      -->

    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  </body>
</html>

